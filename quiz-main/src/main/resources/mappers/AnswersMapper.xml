<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.quiz.mapper.AnswersMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.quiz.entity.Answers">
        <id column="answer_id" property="answerId" />
        <result column="paper_id" property="paperId" />
        <result column="responder_user_id" property="responderUserId" />
        <result column="selects" property="selects" />
        <result column="score" property="score" />
        <result column="created_at" property="createdAt" />
    </resultMap>

     <select id="selectScoreByUserId" resultType="java.lang.Integer" parameterType="java.lang.Integer">
         select sum(a.score) as total_score
         from quiz.q_answers a
                  left join quiz.q_paper b
                            on a.paper_id = b.paper_id
         where a.responder_user_id = #{userId}
           and b.state != -1;
     </select>
</mapper>
