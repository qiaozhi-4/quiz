<style lang="scss">
	.page {
		background: #1F1146;

		.scroll-view {

			height: 100vh;
		}

		.head {
			display: grid;
			place-content: end start;
		}

		.main {

			.v1 {
				justify-content: center;
				align-items: center;
				padding: 10px;
				gap: 8px;

				.avatar-button::after {
					border: none;
				}

				.avatar-button {
					padding: 0;
					border-radius: 50%;
					background-color: transparent;
				}

				.nickname {
					font-family: 'Inter';
					font-style: normal;
					font-weight: 700;
					font-size: 20px;
					line-height: 24px;
				}
			}

			.v2 {
				justify-content: center;
				align-items: center;
				padding: 10px;
				gap: 10px;

				.statistics {
					justify-content: center;
					align-items: center;
					padding: 6px 26px;
					gap: 6px;

					width: 110px;
					height: 32px;

					background: rgba(255, 255, 255, 0.05);
					border-radius: 15px;

					.text1 {
						font-family: 'Inter';
						font-style: normal;
						font-weight: 800;
						font-size: 20px;
						line-height: 24px;
					}

					.text2 {
						font-family: 'Inter';
						font-style: normal;
						font-weight: 500;
						font-size: 12px;
						line-height: 15px;
						color: rgba(255, 255, 255, 0.3);
					}
				}
			}

			.v3 {
				background: #5830C7;
				border-radius: 15px 15px 0px 0px;

				.task {
					display: grid;
					grid-template-columns: 1fr 1fr;
					margin: 0 15px 15px 15px;

					padding: 10px 13px;
					gap: 10px;

					background: #46269E;
					border-radius: 0px 0px 15px 15px;

					.t1 {
						/* 10Á≠î0ÈóÆ */
						font-family: 'Inter';
						font-style: normal;
						font-weight: 800;
						font-size: 20px;
						line-height: 24px;

						color: #FFFFFF;
					}

					.t2 {
						/* Êú¨Âë®ËøûÁª≠ÂõûÁ≠î10È¢ò */
						font-family: 'Inter';
						font-style: normal;
						font-weight: 700;
						font-size: 12px;
						line-height: 15px;

						color: rgba(255, 255, 255, 0.5);
					}

					.b1 {
						grid-column: 2;
						grid-row: 1 / span 2;
						place-self: center end;

						padding: 6px 15px;

						/* Ê∑°Á¥´ Á≤âËâ≤Ê∏êÂèò */
						background: linear-gradient(90deg, #5830C7 0%, #BE53FF 100%);
						border-radius: 30px;

						/* È¢ÜÂèñÂ•ñÂä± */
						font-family: 'Inter';
						font-style: normal;
						font-weight: 700;
						font-size: 12px;
						line-height: 19px;
						text-align: center;

						color: #FFFFFF;
					}
				}

				.table {

					.table-tags {
						position: sticky;
						/* ÂΩìÊªöÂä®Âà∞Ë∑ùÁ¶ªÈ°∂ÈÉ® 0 ÂÉèÁ¥†Êó∂Á≤ò‰Ωè */
						top: 0;
						/* Á°Æ‰øùÁ≤òÊÄßÂÖÉÁ¥†Âú®ÂÖ∂‰ªñÂÖÉÁ¥†‰∏äÊñπ */
						z-index: 1;
						padding-top: 0;
						transition: padding-top 0.2s linear;
						background: #5830C7;

						justify-content: space-between;

						.tag {
							width: 100%;
							padding: 9px 0px;
							justify-content: center;
							align-items: center;

							/* ‰∫≤ÂØÜÊéíË°å */
							font-family: 'Inter';
							font-style: normal;
							font-weight: 700;
							font-size: 16px;
							line-height: 19px;
							text-align: center;

							background: #1F1146;
							color: rgba(255, 255, 255, 0.3);
						}

						.left {
							border-radius: 20px 0 0px 0px;
						}

						.right {
							border-radius: 0 20px 0px 0px;
						}

						.active {
							position: relative;
							color: #fff;
							background: #5830C7;
							border-radius: 0px 0px 20px 20px;
						}

						.active::after {
							left: 0;
							background: radial-gradient(circle at 100% 0%, transparent 20px, #1F1146 0);
						}

						.active::before {
							right: 0;
							background: radial-gradient(circle at 0% 0%, transparent 20px, #1F1146 0);
						}

						.active::after,
						.active::before {
							content: '';
							position: absolute;
							bottom: 0;
							width: 20px;
							height: 20px;
							/* ËÆæÁΩÆËøáÊ∏°ÊïàÊûú */
							animation: moveAndFadeIn 0.5s ease;
						}

						@keyframes moveAndFadeIn {
							0% {
								height: 0;
							}

							100% {
								height: 20px;
							}
						}
					}

					.table-content {
						background: #1F1146;

						justify-content: start;
						align-items: center;

						padding-top: 10px;

						.table-null-text {
							/* ÊÇ®ÁöÑ‰∫≤ÂØÜÊéíË°åÁ©∫Á©∫Â¶Ç‰πü üåüÂø´ÂéªÈÇÄËØ∑ÊúãÂèãÂêßÔºÅ */
							font-family: 'Inter';
							font-style: normal;
							font-weight: 700;
							font-size: 32px;
							line-height: 39px;
							text-align: center;

							color: #FFFFFF;
						}

						.t1 {
							padding-top: 50px;
						}

						.table-null-button {
							margin-top: 20px;
							box-sizing: border-box;
							display: flex;
							flex-direction: row;
							justify-content: center;
							align-items: center;
							padding: 9px 0px;

							width: 244px;
							height: 52px;

							/* Ê∑°Á¥´ Á≤âËâ≤Ê∏êÂèò */
							background: linear-gradient(90deg, #5830C7 0%, #BE53FF 100%);
							border: 1px solid rgba(255, 255, 255, 0.3);
							box-shadow: 0px 0px 14px 4px rgba(255, 255, 255, 0.25);
							border-radius: 30px;

							font-family: 'Inter';
							font-style: normal;
							font-weight: 700;
							font-size: 28px;
							line-height: 34px;

							color: #FFFFFF;
						}

						.table-item {
							display: grid;
							grid-template-columns: auto auto 1fr auto auto;
							align-items: center;
							width: 100%;
							height: 54px;
							padding: 0 15px;

							.ranking {
								padding-right: 15px;

								font-family: 'Inter';
								font-style: normal;
								font-weight: 700;
								font-size: 16px;
								line-height: 19px;
							}

							.nickname {
								justify-self: start;
								padding-left: 5px;

								font-family: 'Inter';
								font-style: normal;
								font-weight: 700;
								font-size: 16px;
								line-height: 19px;
							}

							.score {
								font-family: 'Inter';
								font-style: normal;
								font-weight: 800;
								font-size: 20px;
								line-height: 24px;
								text-align: center;

								color: #A729E2;
							}

							.svg {
								justify-self: end;

								padding-left: 15px;
							}

							.no1 {
								background: linear-gradient(251.44deg, #F5A022 19.28%, #FFCA10 80.72%);
								background-clip: text;
								-webkit-background-clip: text;
								color: transparent;
								text-shadow: 0px 0px 20px #FFAD55;
							}

							.no2 {
								background: linear-gradient(180deg, #B3B3B3 0%, #F5F5F5 100%);
								background-clip: text;
								-webkit-background-clip: text;
								color: transparent;
								text-shadow: 0px 0px 20px #F5F5F5;
							}

							.no3 {
								background: linear-gradient(180deg, #B37F43 0%, #D0995A 100%);
								background-clip: text;
								-webkit-background-clip: text;
								color: transparent;
								text-shadow: 0px 0px 20px #D0995A;
							}
						}
					}

					.test-info {
						background: #1F1146;
						gap: 20px;
						padding: 0 20px;

						.class {
							gap: 10px;

							.name1 {
								font-family: 'Inter';
								font-style: normal;
								font-weight: 400;
								font-size: 14px;
								line-height: 17px;
								/* identical to box height */

								color: #FFFFFF;
							}

							.item1 {
								position: relative;

								padding: 11px 13px;
								gap: 3px;

								background: rgba(255, 255, 255, 0.1);
								border-radius: 15px;

								.question-title {
									gap: 3px;

									.svg {
										width: 10px;
										height: 10px;
									}

									.title {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 500;
										font-size: 12px;
										line-height: 15px;

										color: #FFFFFF;

										opacity: 0.7;
									}
								}

								.question-info {
									justify-content: space-between;
									align-items: center;
									gap: 3px;
									padding-left: 10px;

									.option {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 700;
										font-size: 16px;
										line-height: 19px;
										letter-spacing: -0.04em;

										color: #FFFFFF;
									}

									.input-value {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 500;
										font-size: 12px;
										line-height: 15px;
										/* identical to box height */
										letter-spacing: -0.04em;

										color: rgba(255, 255, 255, 0.75);
									}
								}

								.svg {
									position: absolute;
									right: -11px;
									top: -11px;
								}
							}

							.item1-1 {
								position: relative;
								padding: 8px 11px;
								gap: 20px;

								background: rgba(255, 255, 255, 0.07);
								border-radius: 15px;

								.user-info {
									justify-content: center;
									align-items: center;
									gap: 2px;

									.nickname {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 600;
										font-size: 12px;
										line-height: 15px;
										text-align: center;

										color: #FFFFFF;
									}
								}

								.topic {
									position: relative;
									gap: 4px;
									justify-content: center;

									.svg {
										position: absolute;
										left: -10px;
										top: 10px;
									}

									.title {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 300;
										font-size: 12px;
										line-height: 15px;

										color: #FFFFFF;
									}

									.answer {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 900;
										font-size: 16px;
										line-height: 19px;

										color: #FFFFFF;
									}
								}

								.svg {
									position: absolute;
									right: -11px;
									top: -11px;
								}
							}

							.add {
								justify-content: center;
								gap: 4px;
								position: relative;

								box-sizing: border-box;
								padding: 13px 30px;
								border: 1px dashed #FFFFFF;
								border-radius: 15px;

								background: #2F1969;

								.t1 {
									font-family: 'Inter';
									font-style: normal;
									font-weight: 900;
									font-size: 16px;
									line-height: 19px;

									color: #FFFFFF;
								}

								.t2 {
									font-family: 'Inter';
									font-style: normal;
									font-weight: 300;
									font-size: 12px;
									line-height: 15px;

									color: rgba(255, 255, 255, 0.3);
								}

								.svg {
									position: absolute;
									right: -11px;
									top: -11px;
								}
							}

							.items {
								position: relative;
								right: 20px;
								width: 100vw;
								background: rgba(255, 255, 255, 0.07);


								.item2 {
									display: grid;
									grid-template-columns: 1fr auto;
									gap: 10px;
									align-items: center;
									padding: 10px 20px;

									.title {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 400;
										font-size: 14px;
										line-height: 17px;
										color: #FFFFFF;
									}

									.option {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 600;
										font-size: 14px;
										line-height: 17px;

										color: #A143FF;
									}

									.input-value {
										font-family: 'Inter';
										font-style: normal;
										font-weight: 500;
										font-size: 12px;
										line-height: 15px;

										color: rgba(255, 255, 255, 0.4);
									}
								}
							}

							.t1 {
								/* Êü•ÁúãÂÖ®ÈÉ® */
								font-family: 'Inter';
								font-style: normal;
								font-weight: 600;
								font-size: 12px;
								line-height: 15px;

								color: #A729E2;

							}
						}
					}



					.table-record {
						background: #1F1146;
						gap: 10px;

						.input-wrap {
							align-items: center;
							gap: 5px;
							margin: 10px;
							background: rgba(255, 255, 255, 0.1);
							padding: 7px 18px;
							border-radius: 30px;

							.input {
								width: 100%;
								font-family: 'Inter';
								font-style: normal;
								font-weight: 700;
								font-size: 16px;
								line-height: 19px;

								color: #FFFFFF;
							}

							.input-placeholder {
								font-family: 'Inter';
								font-style: normal;
								font-weight: 400;
								font-size: 16px;
								line-height: 19px;

								color: rgba(255, 255, 255, 0.3);
							}
						}

						.test-paper {
							margin: 0 12.5px;
							padding: 11px 13px;
							gap: 12px;

							background: #5830C7;
							border-radius: 15px;

							.v1 {
								padding: 0;
								align-items: center;
								justify-content: space-between;

								.title {
									font-family: 'Inter';
									font-style: normal;
									font-weight: 700;
									font-size: 16px;
									line-height: 19px;
									letter-spacing: -0.04em;

									color: #FFFFFF;
								}

								.count {
									font-family: 'Inter';
									font-style: normal;
									font-weight: 500;
									font-size: 12px;
									line-height: 15px;
									/* identical to box height */
									letter-spacing: -0.04em;

									color: rgba(255, 255, 255, 0.7);

								}
							}

							.v2 {
								padding: 0;
								gap: 10px;
								align-items: center;
								justify-content: flex-end;

								.extra {
									flex-grow: 1;
								}

								.button {
									justify-content: center;
									align-items: center;
									padding: 5px 15px;
									gap: 10px;

									background: rgba(255, 255, 255, 0.3);
									backdrop-filter: blur(25px);
									border-radius: 30px;

									font-family: 'Inter';
									font-style: normal;
									font-weight: 700;
									font-size: 12px;
									line-height: 15px;
									/* identical to box height */

									color: #FFFFFF;

								}
							}
						}
					}
				}
			}
		}

		.footer {
			width: 100vw;
			position: absolute;
			bottom: 0;
			/* ÂΩìÊªöÂä®Âà∞Ë∑ùÁ¶ªÈ°∂ÈÉ® 0 ÂÉèÁ¥†Êó∂Á≤ò‰Ωè */
			z-index: 1;
			/* Á°Æ‰øùÁ≤òÊÄßÂÖÉÁ¥†Âú®ÂÖ∂‰ªñÂÖÉÁ¥†‰∏äÊñπ */
			/* Âá∫È¢òÊåâÈíÆ */

			box-sizing: border-box;
			flex-direction: column;
			align-items: center;
			padding: 30px 31px;

			background: #1F1146;
			border-top: 1px solid rgba(255, 255, 255, 0.3);
			border-radius: 15px 15px 0px 0px;

			.b1 {
				flex-direction: column;
				align-items: center;
				padding: 10px;

				width: 299px;

				box-sizing: border-box;

				background: linear-gradient(90deg, #8163FB 0%, #AE2EDA 23.19%, #A627E1 89.69%);
				border-radius: 30px;

				font-family: 'Inter';
				font-style: normal;
				font-weight: 700;
				font-size: 24px;
				line-height: 29px;

				color: #FFFFFF;
			}
		}
	}
</style>

<template>
	<view class="page">
		<scroll-view class="scroll-view" scroll-y="true" @scroll="onScroll" :scroll-top="scrollTop"
			scroll-with-animation>
			<view class="head" :style="headStyle">
				<q-svg icon="‰∏™‰∫∫‰∏ªÈ°µ-Â§¥ÈÉ®-Âä†Âè∑" size="32" />
			</view>
			<view class="main flex-column">
				<view class="v1 flex-column">
					<button class="avatar-button" open-type="chooseAvatar" @chooseavatar="onChooseAvatar">
						<q-avatar :src="userInfo?.avatarUrl" size="69" borderWidth="3"></q-avatar>
					</button>
					<view class="nickname">{{userInfo?.nickname}}</view>
				</view>
				<view class="v2">
					<view class="statistics">
						<text class="text1">{{questionBank?.length}}</text>
						<text class="text2">Âá∫È¢ò</text>
					</view>
					<view class="statistics">
						<text class="text1">0</text>
						<text class="text2">Á≠îÈ¢ò</text>
					</view>
					<view class="statistics">
						<text class="text1">0</text>
						<text class="text2">ÂØÜÂèã</text>
					</view>
				</view>
				<view class="v3 flex-column">
					<view class="task">
						<text class="t1">10Á≠î0ÈóÆ</text>
						<text class="t2">Êú¨Âë®ËøûÁª≠ÂõûÁ≠î10È¢ò</text>
						<button class="b1" @click="clickTask">È¢ÜÂèñÂ•ñÂä±</button>
					</view>
					<view class="table flex-column">
						<view class="table-tags" :style="{paddingTop:`${tagPaddingTop}px`}">
							<view class="tag"
								:class="{active:activeTag==index, left:index==activeTag+1, right:index==activeTag-1 }"
								v-for="(tag,index) in tags" :key="index" @click="onTag(index)">
								{{tag}}
							</view>
						</view>
						<view v-show="activeTag==0" class="table-content flex-column">
							<template v-if="friends.length!=0">
								<view class="table-item" v-for="(friend, index) in friends" :key="index"
									@click="goFriendHome(friend.id)">
									<view class="ranking" :class="`no${index+1}`">{{index+1}}</view>
									<q-avatar :src="friend.avatarUrl" size="42" />
									<view class="nickname" :class="`no${index+1}`">{{friend.nickname}}</view>
									<view class="score" :class="`no${index+1}`">{{friend.score}}</view>
									<q-svg class="svg" icon="‰∏™‰∫∫‰∏ªÈ°µ-ÊéíË°å-ËΩ¨Âà∞Â•ΩÂèã" size="22" />
								</view>
							</template>
							<template v-else>
								<text class="table-null-text t1">ÊÇ®ÁöÑ‰∫≤ÂØÜÊéíË°åÁ©∫Á©∫Â¶Ç‰πü</text>
								<text class="table-null-text t2">üåüÂø´ÂéªÈÇÄËØ∑ÊúãÂèãÂêßÔºÅ</text>
								<!-- <button class="table-null-button b1">ËÆ©ÊúãÂèãÊµãÊµãÔºÅ</button> -->
							</template>
						</view>
						<view v-show="activeTag==1" class="test-info flex-column">
							<view class="class flex-column" v-for="(e ,index) in testInfo" :key="index">
								<template v-if="index < 2">
									<view class="name1">{{e?.name}}</view>
									<template v-for="(item,i) in e.items" :key="i">
										<view class="item1 flex-column" v-if="item?.title && index == 0">
											<view class="question-title">
												<q-svg icon="Â∑¶ÂèåÂºïÂè∑" size="10" />
												<view class="title text-overflow">{{item?.title}}</view>
											</view>
											<view class="question-info">
												<view class="option text-overflow">{{item?.select}}</view>
												<view class="input-value text-overflow">{{item?.input}}</view>
											</view>
											<q-svg class="svg" icon="‰∏™‰∫∫‰∏ªÈ°µ-ÊµãËØï‰ø°ÊÅØ-Âà†Èô§" size="22"
												@click="remove(index,i)"></q-svg>
										</view>

										<view class="item1-1" v-if="item?.title && index == 1">
											<view class="user-info flex-column">
												<q-avatar :src="item?.avatarUrl" size="41"></q-avatar>
												<view class="nickname">{{item?.nickname}}</view>
											</view>
											<view class="topic flex-column">
												<q-svg class="svg" icon="Â∑¶ÂèåÂºïÂè∑" size="10" />
												<text class="title text-overflow">{{item?.title}}</text>
												<text class="answer text-overflow">{{item?.select}}</text>
											</view>
											<q-svg class="svg" icon="‰∏™‰∫∫‰∏ªÈ°µ-ÊµãËØï‰ø°ÊÅØ-Âà†Èô§" size="22"
												@click="remove(index,i)"></q-svg>
										</view>
									</template>
									<view class="add flex-column" @click="add(index)">
										<text class="t1">{{e?.extra?.t1}}</text>
										<text class="t2">{{e?.extra?.t2}}</text>
										<q-svg class="svg" icon="‰∏™‰∫∫‰∏ªÈ°µ-ÊµãËØï‰ø°ÊÅØ-Ê∑ªÂä†" size="22"></q-svg>
									</view>
								</template>
								<template v-else>
									<view class="name1">{{e.name}}</view>
									<view class="items flex-column">
										<template v-for="(item,i) in e.items" :key="i">
											<view class="item2" v-if="i < 4 || e.spread">
												<view class="title text-overflow">{{item?.title}}</view>
												<view class="option text-overflow">{{item?.select}}</view>
												<view class="input-value text-overflow">{{item?.input}}</view>
											</view>
										</template>
									</view>
									<text class="t1" v-if="e.spread" @click="hidden(index)">Êî∂Ëµ∑</text>
									<text class="t1" v-else @click="showAll(index)">Êü•ÁúãÂÖ®ÈÉ®</text>
								</template>
							</view>
						</view>
						<view v-show="activeTag==2" class="table-record flex-column">
							<view class="input-wrap">
								<q-svg class="svg" icon="ÊêúÁ¥¢" size="14.5" />
								<input class="input" placeholder-class="input-placeholder" placeholder="ÊêúÁ¥¢"
									:adjust-position="false" @input="onInput" @blur="onBlur" :value="input" />
							</view>
							<view class="test-paper flex-column" v-for="(question,index) in questionBank" :key="index">
								<view class="v1">
									<!-- <text class="title">{{question?.title}}</text> -->
									<text class="title">{{userInfo?.nickname}}ÁöÑ{{question?.order}}Âè∑ÊµãËØï</text>
									<text class="count">{{question?.answersTotal}}‰∏™ÊúãÂèãÊµãËøá</text>
								</view>
								<view class="v2">
									<view class="extra">
										<!-- <text class="text" @click="">...</text> -->
										<button class="button"
											@click="onRemorPafer(question?.paperId,index)">Âà†Èô§</button>
									</view>
									<button class="button" @click="onParticulars(question?.paperId)">Êü•ÁúãËØ¶ÊÉÖ</button>
									<button class="button" open-type="share" :data-paperId="question?.paperId" >ÂàÜ‰∫´ÁªôÊúãÂèã</button>
								</view>
							</view>
						</view>
						<view style="min-height: 160px; background-color: #1F1146;"></view>
					</view>

				</view>
			</view>
		</scroll-view>
		<view class="footer">
			<button class="b1" @click="goSetTest">ÂéªÂá∫È¢ò</button>
		</view>
	</view>
</template>

<script lang="ts" setup>
	import { ref, onMounted } from 'vue'
	import { onLoad, onShareAppMessage } from '@dcloudio/uni-app'
	import * as paper from '../../utils/api/paper';
	/** Ëé∑ÂèñÁôªÂΩï‰ø°ÊÅØ */
	const userInfo = ref<Quiz.UserInfo>()
	/** Â§¥ÈÉ®Ê†∑Âºè */
	const headStyle = getApp().globalData.headStyle
	/** Â§¥ÈÉ®È´òÂ∫¶ */
	const headHeight = getApp().globalData.headHeight
	/** ‰∏ª‰ΩìÈ´òÂ∫¶ */
	const mainHeight = getApp().globalData.mainHeight
	/** Ê†áÁ≠æ */
	const tags = ref(['‰∫≤ÂØÜÊéíË°å', 'ÈóÆÁ≠îÂ±ïÁ§∫', 'ÊàëÁöÑÈ¢òÂ∫ì'])
	/** ÂΩìÂâçÊøÄÊ¥ªÁöÑÊ†áÁ≠æ */
	const activeTag = ref(0)
	/** ÊªöÂä®Êù°‰ΩçÁΩÆ */
	const scrollTop = ref(0)
	/** Ê†áÁ≠æËß¶ÂèëÁ≤òÊÄßÂÆö‰ΩçÁöÑ‰∏äËæπË∑ù */
	const tagPaddingTop = ref(0)
	/** ‰∫≤ÂØÜÊéíË°åÊ¶úÊï∞ÊçÆ */
	const friends = ref([])
	/** ÊµãËØï‰ø°ÊÅØÊï∞ÊçÆ */
	const testInfo = ref([
		{
			name: 'ÂÖ≥ÈîÆÈ¢ò',
			items: [{
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			},],
			extra: {
				t1: 'ÈÄâÊã©‰∏ÄÈÅìÈ¢ò',
				t2: 'Â±ïÁ§∫‰Ω†ÁöÑÁ≠îÊ°à',
			}
		},
		{
			name: 'ÊúãÂèãÁöÑÁúãÊ≥ï',
			items: [],
			extra: {
				t1: 'ÈÄâÊã©1Êù°ÊúãÂèãÁöÑÁúãÊ≥ï',
				t2: 'Â±ïÁ§∫ÂõûÁ≠î',
			}
		},
		{
			name: 'Âü∫Á°ÄÈ¢ò',
			spread: false,
			items: [{
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			}, {
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			},]
		},
		{
			name: 'ËøõÈò∂È¢ò',
			spread: false,
			items: [{
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			}, {
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			},]
		},
		{
			name: 'Ê†∏ÂøÉÈ¢ò',
			spread: false,
			items: [{
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			}, {
				title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
				select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			}, {
				title: '‰Ω†Êõ¥ÂñúÊ¨¢Âì™ÁßçÁ±ªÂûãÁöÑÁîµÂΩ±Ôºü',
				select: 'ÁôΩÂºÄÊ∞¥',
			},]
		},
	])
	/** ÊêúÁ¥¢Ê°ÜËæìÂÖ• */
	const input = ref('')
	/** È¢òÂ∫ìÊï∞ÊçÆ */
	const questionBank = ref([])
	/** Ëé∑ÂèñÂæÆ‰ø°Â§¥ÂÉèËß¶Âèë */
	function onChooseAvatar(e) {
		console.log("Ëé∑ÂèñÂæÆ‰ø°Â§¥ÂÉèËß¶Âèë", e);
		const { avatarUrl } = e.detail
		userInfo.value.avatarUrl = avatarUrl
	}
	/** ÁÇπÂáªÊúãÂèãËß¶Âèë */
	function goFriendHome(id) {
		uni.navigateTo({
			url: `/pages/friend-home/friend-home?id=${id}`
		});
	}
	/** ÁÇπÂáªÈ¢ÜÂèñÂ•ñÂä±Ëß¶Âèë,Ë∑≥ËΩ¨Âà∞‰ªªÂä°È°µÈù¢ */
	function clickTask() {
		uni.navigateTo({
			url: `/pages/task/task`
		});
	}
	/** È°µÈù¢ÊªöÂä®Ëß¶Âèë */
	function onScroll(e) {
		if (e.detail.scrollTop > 230) {
			tagPaddingTop.value = headHeight
		} else {
			tagPaddingTop.value = 0
		}
	}
	/** ÁÇπÂáªtagËß¶Âèë */
	function onTag(index) {
		scrollTop.value = 0
		scrollTop.value = 325
		activeTag.value = index
	}
	/** Âà†Èô§Â±ïÁ§∫ÂÖ≥ÈîÆÈ¢ò */
	function remove(infoIindex, itemIndx) {
		delete testInfo.value[infoIindex].items[itemIndx]
	}
	/** Ê∑ªÂä†Â±ïÁ§∫ÂÖ≥ÈîÆÈ¢ò */
	function add(infoIindex) {
		console.log('Ê∑ªÂä†Â±ïÁ§∫ÂÖ≥ÈîÆÈ¢ò:', infoIindex);
		if (testInfo.value[infoIindex].name == "ÂÖ≥ÈîÆÈ¢ò") {
			uni.navigateTo({
				url: `/pages/select-topic/select-topic?index=${infoIindex}`
			});
		} else if (testInfo.value[infoIindex].name == "ÊúãÂèãÁöÑÁúãÊ≥ï") {
			uni.navigateTo({
				url: `/pages/select-friend-view/select-friend-view?index=${infoIindex}`
			});
		}
	}
	/** Â±ïÁ§∫ÂÖ®ÈÉ®ÊµãËØï‰ø°ÊÅØ */
	function showAll(infoIindex) {
		if (testInfo.value[infoIindex].items.length < 5) {
			for (let i = 0; i < 5; i++) {
				testInfo.value[infoIindex].items.push({
					title: '‰Ω†ÊúÄÂñúÊ¨¢Âú®Âë®Êú´ÂÅö‰ªÄ‰πàÔºü',
					select: 'Âú®ÂÆ∂ËøõË°å‰∏™‰∫∫Ê¥ªÂä®',
					input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
				})
			}
		}
		testInfo.value[infoIindex].spread = true
	}
	/** Êî∂Ëµ∑ÂÖ®ÈÉ®ÊµãËØï‰ø°ÊÅØ */
	function hidden(infoIindex) {
		testInfo.value[infoIindex].spread = false
	}
	/** ÈîÆÁõòËæìÂÖ•Ëß¶Âèë */
	function onInput(e : any) {
		input.value = e.detail.value
	}
	/** ÈîÆÁõòÂ§±ÂéªÁÑ¶ÁÇπËß¶Âèë */
	function onBlur(e : any) {
		input.value = e.detail.value
	}
	/** Âà†Èô§ËØïÂç∑ */
	function onRemorPafer(paperId : number, index : number) {
		paper.remove(paperId).then(res => {
			questionBank.value.splice(index, 1)
		})

	}
	/** Ë∑≥ËΩ¨È¢òÂ∫ìÁöÑËØïÂç∑ËØ¶ÊÉÖ */
	function onParticulars(paperId : number) {
		uni.navigateTo({
			url: `/pages/question-particulars/question-particulars?paperId=${paperId}`
		});
	}
	/** ÂàÜ‰∫´ËØïÂç∑ */
	onShareAppMessage((res) => {
		if (res.from === 'button') {// Êù•Ëá™È°µÈù¢ÂÜÖÂàÜ‰∫´ÊåâÈíÆ
			return {
				title: 'Êàë‰ª¨‰πãÈó¥ÊúâÂ§ö‰∫≤ÂØÜÔºü',
				path: `/pages/start-test/start-test?isAnswer=true&paperId=${res.target.dataset.paperid}&userId=${userInfo.value.userId}`,
				imageUrl: '/static/img/Â∞èËΩ¨ÂèëÁ™ó.png'
			}
		}
		return {
			title: 'ËøôÊµãËØï',
			path: '/pages/start-test/start-test?isAnswer=true',
			imageUrl: '/static/img/Â∞èËΩ¨ÂèëÁ™ó.png'
		}
	})
	/** Ë∑≥ËΩ¨Âà∞Âá∫È¢òÈ°µ */
	function goSetTest() {
		uni.navigateTo({
			url: `/pages/start-test/start-test?isAnswer=false`
		});
	}
	onMounted(() => {
		userInfo.value = getApp().globalData.userInfo
		for (var i = 0; i < 20; i++) {
			friends.value.push({
				nickname: `Áî®Êà∑${i + 1}`,
				score: (20 - i) * 1000,
				avatarUrl: '',
				id: i
			})
		}
		paper.getAll().then((res) => {
			questionBank.value = res.data
		})
	})
	onLoad((option) => {
		if (option.topicId) {
			activeTag.value = 1
			console.log('ËøôÊòØ‰ªéÈÄâÊã©È¢òÁõÆÊù•ÁöÑÂèÇÊï∞', option);
			testInfo.value[0].items.push({
				title: `È¢òÁõÆ${option.topicId}`,
				select: 'ÂêéÁª≠‰ªéÊï∞ÊçÆÊü•ËØ¢',
				input: 'ÂêÉÈ•≠Áù°ËßâÊ∏∏Êàè‰ª£Á†Å'
			})
		} else if (option.friendId) {
			activeTag.value = 1
			console.log('ËøôÊòØ‰ªéÈÄâÊã©ÊúãÂèãÁúãÊ≥ïÊù•ÁöÑÂèÇÊï∞', option);
			testInfo.value[1].items.push({
				nickname: `Áî®Êà∑${option.friendId}`,
				avatarUrl: '',
				title: 'ÂêéÁª≠‰ªéÊï∞ÊçÆÊü•ËØ¢',
				select: 'ÂñúÊ¨¢‰∏çÂÜ∑‰∏çÁÉ≠‰∏çÈõ®‰∏çÊô¥ÔºåÈò¥Â§©ÊúÄÂ•Ω',
			})
		}
	})
</script>